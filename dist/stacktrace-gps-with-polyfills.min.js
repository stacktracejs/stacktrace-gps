!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){H=t}function r(t){B=t}function o(){return function(){return process.nextTick(a)}}function i(){return function(){I(a)}}function s(){var t=0,e=new W(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<J;t+=2){var e=V[t],n=V[t+1];e(n),V[t]=void 0,V[t+1]=void 0}J=0}function f(){try{var t=require,e=t("vertx");return I=e.runOnLoop||e.runOnContext,i()}catch(n){return c()}}function l(t,e){var n=arguments,r=this,o=new this.constructor(p);void 0===o[et]&&T(o);var i=r._state;return i?!function(){var t=n[i-1];B(function(){return x(i,o,t,r._result)})}():C(r,o,t,e),o}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return _(n,t),n}function p(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function v(t){try{return t.then}catch(e){return it.error=e,it}}function b(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function g(t,e,n){B(function(t){var r=!1,o=b(n,e,function(n){r||(r=!0,e!==n?_(t,n):S(t,n))},function(e){r||(r=!0,A(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,A(t,o))},t)}function y(t,e){e._state===rt?S(t,e._result):e._state===ot?A(t,e._result):C(e,void 0,function(e){return _(t,e)},function(e){return A(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?y(t,n):r===it?A(t,it.error):void 0===r?S(t,n):e(r)?g(t,n,r):S(t,n)}function _(e,n){e===n?A(e,m()):t(n)?w(e,n,v(n)):S(e,n)}function N(t){t._onerror&&t._onerror(t._result),E(t)}function S(t,e){t._state===nt&&(t._result=e,t._state=rt,0!==t._subscribers.length&&B(E,t))}function A(t,e){t._state===nt&&(t._state=ot,t._result=e,B(N,t))}function C(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+rt]=n,o[i+ot]=r,0===i&&t._state&&B(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?x(n,r,o,i):o(i);t._subscribers.length=0}}function O(){this.error=null}function j(t,e){try{return t(e)}catch(n){return st.error=n,st}}function x(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=j(r,o),s===st?(a=!0,u=s.error,s=null):c=!0,n===s)return void A(n,d())}else s=o,c=!0;n._state!==nt||(i&&c?_(n,s):a?A(n,u):t===rt?S(n,s):t===ot&&A(n,s))}function M(t,e){try{e(function(e){_(t,e)},function(e){A(t,e)})}catch(n){A(t,n)}}function P(){return ut++}function T(t){t[et]=ut++,t._state=void 0,t._result=void 0,t._subscribers=[]}function k(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[et]||T(this.promise),Y(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):A(this.promise,F())}function F(){return new Error("Array Methods must be provided an Array")}function $(t){return new k(this,t).promise}function L(t){var e=this;return new e(Y(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function q(t){var e=this,n=new e(p);return A(n,t),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function G(t){this[et]=P(),this._result=this._state=void 0,this._subscribers=[],p!==t&&("function"!=typeof t&&z(),this instanceof G?M(this,t):Z())}function R(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=G}var U=void 0;U=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var Y=U,J=0,I=void 0,H=void 0,B=function(t,e){V[J]=t,V[J+1]=e,J+=2,2===J&&(H?H(a):tt())},D="undefined"!=typeof window?window:void 0,K=D||{},W=K.MutationObserver||K.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,V=new Array(1e3),tt=void 0;tt=X?o():W?s():Q?u():void 0===D&&"function"==typeof require?f():c();var et=Math.random().toString(36).substring(16),nt=void 0,rt=1,ot=2,it=new O,st=new O,ut=0;return k.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===nt&&n<t;n++)this._eachEntry(e[n],n)},k.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=v(t);if(o===l&&t._state!==nt)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===G){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},k.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===nt&&(this._remaining--,t===ot?A(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},k.prototype._willSettleAt=function(t,e){var n=this;C(t,void 0,function(t){return n._settledAt(rt,e,t)},function(t){return n._settledAt(ot,e,t)})},G.all=$,G.race=L,G.resolve=h,G.reject=q,G._setScheduler=n,G._setAsap=r,G._asap=B,G.prototype={constructor:G,then:l,"catch":function(t){return this.then(null,t)}},R(),G.polyfill=R,G.Promise=G,G}),function(){"undefined"==typeof Promise&&ES6Promise.polyfill()}(),function(t,e){"use strict";"function"==typeof define&&define.amd?define("stackframe",[],e):"object"==typeof exports?module.exports=e():t.StackFrame=e()}(this,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t){return t.charAt(0).toUpperCase()+t.substring(1)}function n(t){return function(){return this[t]}}function r(t){if(t instanceof Object)for(var n=0;n<c.length;n++)t.hasOwnProperty(c[n])&&void 0!==t[c[n]]&&this["set"+e(c[n])](t[c[n]])}var o=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],u=["args"],c=o.concat(i,s,u);r.prototype={getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(t){if(t instanceof r)this.evalOrigin=t;else{if(!(t instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new r(t)}},toString:function(){var t=this.getFileName()||"",e=this.getLineNumber()||"",n=this.getColumnNumber()||"",r=this.getFunctionName()||"";return this.getIsEval()?t?"[eval] ("+t+":"+e+":"+n+")":"[eval]:"+e+":"+n:r?r+" ("+t+":"+e+":"+n+")":t+":"+e+":"+n}},r.fromString=function(t){var e=t.indexOf("("),n=t.lastIndexOf(")"),o=t.substring(0,e),i=t.substring(e+1,n).split(","),s=t.substring(n+1);if(0===s.indexOf("@"))var u=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(s,""),c=u[1],a=u[2],f=u[3];return new r({functionName:o,args:i||void 0,fileName:c,lineNumber:a||void 0,columnNumber:f||void 0})};for(var a=0;a<o.length;a++)r.prototype["get"+e(o[a])]=n(o[a]),r.prototype["set"+e(o[a])]=function(t){return function(e){this[t]=Boolean(e)}}(o[a]);for(var f=0;f<i.length;f++)r.prototype["get"+e(i[f])]=n(i[f]),r.prototype["set"+e(i[f])]=function(e){return function(n){if(!t(n))throw new TypeError(e+" must be a Number");this[e]=Number(n)}}(i[f]);for(var l=0;l<s.length;l++)r.prototype["get"+e(s[l])]=n(s[l]),r.prototype["set"+e(s[l])]=function(t){return function(e){this[t]=String(e)}}(s[l]);return r}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("stacktrace-gps",["source-map","stackframe"],e):"object"==typeof exports?module.exports=e(require("source-map/lib/source-map-consumer"),require("stackframe")):t.StackTraceGPS=e(t.SourceMap||t.sourceMap,t.StackFrame)}(this,function(t,e){"use strict";function n(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("get",t),r.onerror=n,r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300||"file://"===t.substr(0,7)&&r.responseText?e(r.responseText):n(new Error("HTTP status: "+r.status+" retrieving "+t)))},r.send()})}function r(t){if("undefined"!=typeof window&&window.atob)return window.atob(t);throw new Error("You must supply a polyfill for window.atob in this environment")}function o(t){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(t);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function i(t,e){for(var n=[/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,/function\s+([^('"`]*?)\s*\(([^)]*)\)/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,/\b(?!(?:if|for|switch|while|with|catch)\b)(?:(?:static)\s+)?(\S+)\s*\(.*?\)\s*\{/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*\(.*?\)\s*=>/],r=t.split("\n"),o="",i=Math.min(e,20),s=0;s<i;++s){var u=r[e-s-1],c=u.indexOf("//");if(c>=0&&(u=u.substr(0,c)),u){o=u+o;for(var a=n.length,f=0;f<a;f++){var l=n[f].exec(o);if(l&&l[1])return l[1]}}}}function s(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function u(t){if("object"!=typeof t)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof t.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof t.lineNumber||t.lineNumber%1!==0||t.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof t.columnNumber||t.columnNumber%1!==0||t.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function c(t){for(var e,n,r=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/gm;n=r.exec(t);)e=n[1];if(e)return e;throw new Error("sourceMappingURL not found")}function a(t,n,r){return new Promise(function(o,i){var s=n.originalPositionFor({line:t.lineNumber,column:t.columnNumber});if(s.source){var u=n.sourceContentFor(s.source);u&&(r[s.source]=u),o(new e({functionName:s.name||t.functionName,args:t.args,fileName:s.source,lineNumber:s.line,columnNumber:s.column}))}else i(new Error("Could not get original source for given stackframe and source map"))})}return function f(l){return this instanceof f?(l=l||{},this.sourceCache=l.sourceCache||{},this.sourceMapConsumerCache=l.sourceMapConsumerCache||{},this.ajax=l.ajax||n,this._atob=l.atob||r,this._get=function(t){return new Promise(function(e,n){var r="data:"===t.substr(0,5);if(this.sourceCache[t])e(this.sourceCache[t]);else if(l.offline&&!r)n(new Error("Cannot make network requests in offline mode"));else if(r){var o=/^data:application\/json;([\w=:"-]+;)*base64,/,i=t.match(o);if(i){var s=i[0].length,u=t.substr(s),c=this._atob(u);this.sourceCache[t]=c,e(c)}else n(new Error("The encoding of the inline sourcemap is not supported"))}else{var a=this.ajax(t,{method:"get"});this.sourceCache[t]=a,a.then(e,n)}}.bind(this))},this._getSourceMapConsumer=function(e,n){return new Promise(function(r,i){if(this.sourceMapConsumerCache[e])r(this.sourceMapConsumerCache[e]);else{var s=new Promise(function(r,i){return this._get(e).then(function(e){"string"==typeof e&&(e=o(e.replace(/^\)\]\}'/,""))),"undefined"==typeof e.sourceRoot&&(e.sourceRoot=n),r(new t.SourceMapConsumer(e))},i)}.bind(this));this.sourceMapConsumerCache[e]=s,r(s)}}.bind(this))},this.pinpoint=function(t){return new Promise(function(e,n){this.getMappedLocation(t).then(function(t){function n(){e(t)}this.findFunctionName(t).then(e,n)["catch"](n)}.bind(this),n)}.bind(this))},this.findFunctionName=function(t){return new Promise(function(n,r){u(t),this._get(t.fileName).then(function(r){var o=t.lineNumber,s=t.columnNumber,u=i(r,o,s);n(u?new e({functionName:u,args:t.args,fileName:t.fileName,lineNumber:o,columnNumber:s}):t)},r)["catch"](r)}.bind(this))},void(this.getMappedLocation=function(t){return new Promise(function(e,n){s(),u(t);var r=this.sourceCache,o=t.fileName;this._get(o).then(function(n){var i=c(n),s="data:"===i.substr(0,5),u=o.substring(0,o.lastIndexOf("/")+1);return"/"===i[0]||s||/^https?:\/\/|^\/\//i.test(i)||(i=u+i),this._getSourceMapConsumer(i,u).then(function(n){return a(t,n,r).then(e)["catch"](function(){e(t)})})}.bind(this),n)["catch"](n)}.bind(this))})):new f(l)}});
//# sourceMappingURL=stacktrace-gps-with-polyfills.min.js.map
